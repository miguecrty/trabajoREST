(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1852)}])},4586:function(e,t,n){"use strict";var r=n(5893),i=n(7294),o=n(1163),s=n(1955);t.Z=e=>{let{mostrarBotonHome:t,mostrarCerrarSesion:n}=e,a=(0,o.useRouter)(),[c,l]=(0,i.useState)(""),[u,d]=(0,i.useState)(""),[h,p]=(0,i.useState)(!1),[g,x]=(0,i.useState)(""),[m,f]=(0,i.useState)(!1);async function j(e){try{let t=await fetch("/api/actualizarestado",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,estado:e})});await t,t.ok&&console.log("Estado modificado con \xe9xito!")}catch(e){console.error("Error:",e)}}async function y(e){try{(await fetch("/api/borrarcuenta",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})})).ok&&console.log("Estado modificado con \xe9xito!")}catch(e){console.error("Error:",e)}}async function b(){try{confirm("Estas seguro que quieres borrar la cuenta??")&&(y(c),alert("Cuenta borrada..."),s.Z.remove("isLoggedIn"),a.push("/"))}catch(e){console.error("Error:",e)}}return(0,i.useEffect)(()=>{(async()=>{l(await s.Z.get("username"))})()},[]),(0,r.jsx)("header",{style:{backgroundColor:"rgba(0, 80, 255, 0.5)",color:"white",paddingTop:"0.5px",paddingBottom:"0.5px",textAlign:"center",width:"100%"},children:(0,r.jsx)("nav",{children:(0,r.jsxs)("ul",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",listStyleType:"none"},children:[(0,r.jsx)("li",{id:"boton-home",children:t&&(0,r.jsxs)("button",{onClick:()=>{a.push("/")},className:"btn home",children:[" ",(0,r.jsx)("img",{src:"./images/home.png",alt:"Inicio",style:{width:"40px",height:"40px"}})]})}),(0,r.jsx)("li",{style:{display:"flex",alignItems:"center"},children:n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>{p(!h)},style:{marginRight:"40px"},children:"Nuevo Estado"}),h&&(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),j(g),x(""),p(!1)},style:{marginRight:"40px"},children:[(0,r.jsx)("input",{type:"text",value:g,onChange:e=>{x(e.target.value)},placeholder:"Introduce tu texto"}),(0,r.jsx)("button",{type:"submit",children:"âœ…"})]}),(0,r.jsx)("img",{onClick:()=>{f(!m)},src:"./images/perfil.png",alt:"Inicio",style:{width:"30px",height:"30px",marginRight:"10px",cursor:"pointer"}}),(0,r.jsxs)("span",{style:{color:"black",marginRight:"50px"},children:[(0,r.jsx)("strong",{children:c}),m&&(0,r.jsx)("small",{children:(0,r.jsx)("button",{onClick:b,className:"botonborrarcuenta",children:"Borrar cuenta"})})]}),(0,r.jsx)("button",{onClick:()=>{s.Z.remove("isLoggedIn"),a.push("/")},className:"btn cerrar",children:"Cerrar Sesi\xf3n"})]})})]})})})}},3682:function(e,t,n){"use strict";var r=n(5893);n(7294),t.Z=()=>(0,r.jsx)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",padding:"1px",textAlign:"center",position:"fixed",bottom:0,left:0,width:"100%",boxShadow:"0px -5px 10px rgba(0, 0, 0, 0.5)"},children:(0,r.jsx)("p",{children:"\xa9 TrabajoREST [Chat ETSI v1.0.0] : Miguel \xc1ngel L\xf3pez Rodr\xedguez | F\xe9lix Vald\xe9s Medina | Juan Manuel Gonz\xe1lez Orta"})})},1852:function(e,t,n){"use strict";n.r(t);var r=n(5893),i=n(7294),o=n(1163),s=n(1955),a=n(3682),c=n(9008),l=n.n(c);n(4586),t.default=()=>{let e=(0,o.useRouter)(),[t,n]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),[d,h]=(0,i.useState)(!0),[p,g]=(0,i.useState)(""),[x,m]=(0,i.useState)(""),f=async t=>{try{let n=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});await n.json(),n.ok?(h(!0),m("Credenciales correctas, redirigiendo a men\xfa..."),setTimeout(()=>{s.Z.set("isLoggedIn","true"),s.Z.set("username",t.username),e.push("/menu")},1500)):g("Credenciales incorrectas")}catch(e){console.error(e)}};return((0,i.useEffect)(()=>{let t=s.Z.get("isLoggedIn"),n=setTimeout(()=>{"true"===t?e.push("/menu"):(h(!1),e.push("/"))},300);return()=>clearTimeout(n)},[]),d)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:"Cargando..."}),(0,r.jsx)("link",{rel:"icon",href:"/images/chat.png"}),(0,r.jsx)("link",{rel:"stylesheet",href:"./styles/detallecontacto.css"})]}),(0,r.jsx)("div",{className:"cargando",children:(0,r.jsx)("img",{src:"/images/cargando.gif",alt:"Cargando"})})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:"Login"}),(0,r.jsx)("link",{rel:"icon",href:"./images/chat.png"})]}),(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("div",{className:"login-form",children:[(0,r.jsx)("h1",{children:"Iniciar Sesi\xf3n"}),(0,r.jsx)("input",{type:"text",placeholder:"Usuario",value:t,onChange:e=>n(e.target.value)}),(0,r.jsx)("input",{type:"password",placeholder:"Contrase\xf1a",value:c,onChange:e=>u(e.target.value)}),(0,r.jsx)("button",{onClick:()=>{f({username:t,password:c})},children:"Iniciar Sesi\xf3n"}),(0,r.jsx)("button",{onClick:()=>{h(!1),e.push("/registro")},children:"Registrarse"}),p&&(0,r.jsx)("div",{className:"error-message",children:p}),x&&(0,r.jsx)("div",{className:"exito-message",children:x})]}),(0,r.jsx)(a.Z,{})]})]})}},9008:function(e,t,n){e.exports=n(7828)},1163:function(e,t,n){e.exports=n(9090)},1955:function(e,t,n){"use strict";/*! js-cookie v3.0.5 | MIT */function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}n.d(t,{Z:function(){return i}});var i=function e(t,n){function i(e,i,o){if("undefined"!=typeof document){"number"==typeof(o=r({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var a in o)o[a]&&(s+="; "+a,!0!==o[a]&&(s+="="+o[a].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+s}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),s=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(r[a]=t.read(s,a),e===a)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){i(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);