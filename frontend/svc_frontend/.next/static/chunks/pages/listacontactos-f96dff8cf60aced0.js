(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{8336:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/listacontactos",function(){return n(2324)}])},4586:function(e,t,n){"use strict";var r=n(5893),s=n(7294),o=n(1163),a=n(1955);t.Z=e=>{let{mostrarBotonHome:t,mostrarCerrarSesion:n}=e,i=(0,o.useRouter)(),[c,l]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[h,p]=(0,s.useState)(!1),[x,m]=(0,s.useState)(""),[f,g]=(0,s.useState)(!1);async function b(e){try{let t=await fetch("/api/actualizarestado",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,estado:e})});await t,t.ok&&console.log("Estado modificado con \xe9xito!")}catch(e){console.error("Error:",e)}}async function j(e){try{(await fetch("/api/borrarcuenta",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})})).ok&&console.log("Estado modificado con \xe9xito!")}catch(e){console.error("Error:",e)}}async function y(){try{confirm("Estas seguro que quieres borrar la cuenta??")&&(j(c),alert("Cuenta borrada..."),a.Z.remove("isLoggedIn"),i.push("/"))}catch(e){console.error("Error:",e)}}return(0,s.useEffect)(()=>{(async()=>{l(await a.Z.get("username"))})()},[]),(0,r.jsx)("header",{style:{backgroundColor:"rgba(0, 80, 255, 0.5)",color:"white",paddingTop:"0.5px",paddingBottom:"0.5px",textAlign:"center",width:"100%"},children:(0,r.jsx)("nav",{children:(0,r.jsxs)("ul",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",listStyleType:"none"},children:[(0,r.jsx)("li",{id:"boton-home",children:t&&(0,r.jsxs)("button",{onClick:()=>{i.push("/")},className:"btn home",children:[" ",(0,r.jsx)("img",{src:"./images/home.png",alt:"Inicio",style:{width:"40px",height:"40px"}})]})}),(0,r.jsx)("li",{style:{display:"flex",alignItems:"center"},children:n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>{p(!h)},style:{marginRight:"40px"},children:"Nuevo Estado"}),h&&(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),b(x),m(""),p(!1)},style:{marginRight:"40px"},children:[(0,r.jsx)("input",{type:"text",value:x,onChange:e=>{m(e.target.value)},placeholder:"Introduce tu texto"}),(0,r.jsx)("button",{type:"submit",children:"âœ…"})]}),(0,r.jsx)("img",{onClick:()=>{g(!f)},src:"./images/perfil.png",alt:"Inicio",style:{width:"30px",height:"30px",marginRight:"10px",cursor:"pointer"}}),(0,r.jsxs)("span",{style:{color:"black",marginRight:"50px"},children:[(0,r.jsx)("strong",{children:c}),f&&(0,r.jsx)("small",{children:(0,r.jsx)("button",{onClick:y,className:"botonborrarcuenta",children:"Borrar cuenta"})})]}),(0,r.jsx)("button",{onClick:()=>{a.Z.remove("isLoggedIn"),i.push("/")},className:"btn cerrar",children:"Cerrar Sesi\xf3n"})]})})]})})})}},3682:function(e,t,n){"use strict";var r=n(5893);n(7294),t.Z=()=>(0,r.jsx)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",padding:"1px",textAlign:"center",position:"fixed",bottom:0,left:0,width:"100%",boxShadow:"0px -5px 10px rgba(0, 0, 0, 0.5)"},children:(0,r.jsx)("p",{children:"\xa9 TrabajoREST [Chat ETSI v1.0.0] : Miguel \xc1ngel L\xf3pez Rodr\xedguez | F\xe9lix Vald\xe9s Medina | Juan Manuel Gonz\xe1lez Orta"})})},2324:function(e,t,n){"use strict";n.r(t);var r=n(5893),s=n(4586),o=n(3682),a=n(7294),i=n(9008),c=n.n(i);t.default=()=>{let[e,t]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/obtenercontactos");if(!e.ok)throw Error("Error al obtener contactos");let n=await e.json();t(n)}catch(e){console.error("Error:",e)}};e();let n=setInterval(e,2e3);return()=>clearInterval(n)},[]),(0,r.jsxs)("div",{children:[(0,r.jsxs)(c(),{children:[(0,r.jsx)("title",{children:"Lista de Contactos"}),(0,r.jsx)("link",{rel:"icon",href:"./images/chat.png"}),(0,r.jsx)("link",{rel:"stylesheet",href:"./styles/listarcontactos.css"})]}),(0,r.jsx)(s.Z,{mostrarBotonHome:!0,mostrarCerrarSesion:!0}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"}),(0,r.jsx)("h1",{className:"text-center my-5 display-4 font-weight-bold text-uppercase text-secondary",children:"Lista de Contactos"}),(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-8 offset-md-2",children:(0,r.jsx)("div",{className:"list-group",children:e.map(e=>(0,r.jsx)("div",{className:"card border-0 shadow-lg mb-4",children:(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsxs)("h5",{className:"card-title mb-0",children:[e.nombre," ",e.apellido]}),(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,r.jsx)("img",{src:e.imagen,alt:"Avatar",className:"mr-2 rounded-circle",style:{width:"100px",height:"100px"}}),(0,r.jsxs)(r.Fragment,{children:[null!=e.estado?(0,r.jsx)("p",{className:"badge badge-pill badge-light text-dark",children:e.estado}):(0,r.jsx)("p",{className:"badge badge-pill badge-light text-danger",style:{fontSize:"12px"},children:"Sin estado "}),(0,r.jsx)("p",{className:"text-info",children:"Estado"})]})]}),(0,r.jsx)("a",{className:"btn btn-outline-primary",href:"/detallecontacto?id=".concat(e.id),children:"Ver Detalles"})]})},e.id))})})})})]}),(0,r.jsx)(o.Z,{})]})}},9008:function(e,t,n){e.exports=n(7828)},1163:function(e,t,n){e.exports=n(9090)},1955:function(e,t,n){"use strict";/*! js-cookie v3.0.5 | MIT */function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}n.d(t,{Z:function(){return s}});var s=function e(t,n){function s(e,s,o){if("undefined"!=typeof document){"number"==typeof(o=r({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var i in o)o[i]&&(a+="; "+i,!0!==o[i]&&(a+="="+o[i].split(";")[0]));return document.cookie=e+"="+t.write(s,e)+a}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},s=0;s<n.length;s++){var o=n[s].split("="),a=o.slice(1).join("=");try{var i=decodeURIComponent(o[0]);if(r[i]=t.read(a,i),e===i)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){s(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8336)}),_N_E=e.O()}]);