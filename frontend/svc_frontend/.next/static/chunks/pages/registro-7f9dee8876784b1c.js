(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550],{6148:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/registro",function(){return r(1425)}])},4586:function(e,t,r){"use strict";var n=r(5893),a=r(7294),o=r(1163),s=r(1955);t.Z=e=>{let{mostrarBotonHome:t,mostrarCerrarSesion:r}=e,i=(0,o.useRouter)(),[c,l]=(0,a.useState)(""),[u,d]=(0,a.useState)(""),[p,h]=(0,a.useState)(!1),[g,x]=(0,a.useState)(""),[m,f]=(0,a.useState)(!1);async function v(e){try{let t=await fetch("/api/actualizarestado",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,estado:e})});await t,t.ok&&console.log("Estado modificado con \xe9xito!")}catch(e){console.error("Error:",e)}}async function j(e){try{(await fetch("/api/borrarcuenta",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})})).ok&&console.log("Estado modificado con \xe9xito!")}catch(e){console.error("Error:",e)}}async function y(){try{confirm("Estas seguro que quieres borrar la cuenta??")&&(j(c),alert("Cuenta borrada..."),s.Z.remove("isLoggedIn"),i.push("/"))}catch(e){console.error("Error:",e)}}return(0,a.useEffect)(()=>{(async()=>{l(await s.Z.get("username"))})()},[]),(0,n.jsx)("header",{style:{backgroundColor:"rgba(0, 80, 255, 0.5)",color:"white",paddingTop:"0.5px",paddingBottom:"0.5px",textAlign:"center",width:"100%"},children:(0,n.jsx)("nav",{children:(0,n.jsxs)("ul",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",listStyleType:"none"},children:[(0,n.jsx)("li",{id:"boton-home",children:t&&(0,n.jsxs)("button",{onClick:()=>{i.push("/")},className:"btn home",children:[" ",(0,n.jsx)("img",{src:"./images/home.png",alt:"Inicio",style:{width:"40px",height:"40px"}})]})}),(0,n.jsx)("li",{style:{display:"flex",alignItems:"center"},children:r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>{h(!p)},style:{marginRight:"40px"},children:"Nuevo Estado"}),p&&(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v(g),x(""),h(!1)},style:{marginRight:"40px"},children:[(0,n.jsx)("input",{type:"text",value:g,onChange:e=>{x(e.target.value)},placeholder:"Introduce tu texto"}),(0,n.jsx)("button",{type:"submit",children:"âœ…"})]}),(0,n.jsx)("img",{onClick:()=>{f(!m)},src:"./images/perfil.png",alt:"Inicio",style:{width:"30px",height:"30px",marginRight:"10px",cursor:"pointer"}}),(0,n.jsxs)("span",{style:{color:"black",marginRight:"50px"},children:[(0,n.jsx)("strong",{children:c}),m&&(0,n.jsx)("small",{children:(0,n.jsx)("button",{onClick:y,className:"botonborrarcuenta",children:"Borrar cuenta"})})]}),(0,n.jsx)("button",{onClick:()=>{s.Z.remove("isLoggedIn"),i.push("/")},className:"btn cerrar",children:"Cerrar Sesi\xf3n"})]})})]})})})}},3682:function(e,t,r){"use strict";var n=r(5893);r(7294),t.Z=()=>(0,n.jsx)("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",padding:"1px",textAlign:"center",position:"fixed",bottom:0,left:0,width:"100%",boxShadow:"0px -5px 10px rgba(0, 0, 0, 0.5)"},children:(0,n.jsx)("p",{children:"\xa9 TrabajoREST [Chat ETSI v1.0.0] : Miguel \xc1ngel L\xf3pez Rodr\xedguez | F\xe9lix Vald\xe9s Medina | Juan Manuel Gonz\xe1lez Orta"})})},1425:function(e,t,r){"use strict";r.r(t);var n=r(5893),a=r(7294),o=r(1163),s=r(3682);r(9413);var i=r(9008),c=r.n(i),l=r(4586);t.default=()=>{let e=(0,o.useRouter)(),[t,r]=(0,a.useState)(""),[i,u]=(0,a.useState)(""),[d,p]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[x,m]=(0,a.useState)(""),[f,v]=(0,a.useState)(""),[j,y]=(0,a.useState)(""),[b,C]=(0,a.useState)(""),[w,S]=(0,a.useState)(!1),[N,k]=(0,a.useState)(""),R=async r=>{try{let n=await fetch("/api/registrar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});200===n.status&&(alert("Usuario: "+t+" creado correctamente."),S(!0),setTimeout(()=>{e.push("/")},1e3))}catch(e){console.error(e)}},E=async()=>{i.length>4&&t.length>4?i===d?R({username:t,password:i,nombre:h,apellido:x,telefono:f,email:j,imagen:b}):k("Error de contrase\xf1a"):k("Usuario y/o clave tienen que ser mayor que 4 caracteres")};(0,a.useRef)();let[T,I]=(0,a.useState)(!1);return w?(0,n.jsx)("div",{className:"cargando",children:(0,n.jsx)("img",{src:"/images/cargando.gif",alt:"Cargando"})}):(0,n.jsxs)("div",{children:[(0,n.jsxs)(c(),{children:[(0,n.jsx)("title",{children:"Registro"}),(0,n.jsx)("link",{rel:"icon",href:"./images/chat.png"})]}),(0,n.jsx)(l.Z,{mostrarBotonHome:!0,mostrarCerrarSesion:!1}),(0,n.jsxs)("div",{className:"container",children:[(0,n.jsxs)("div",{className:"login-form",children:[(0,n.jsx)("h1",{children:"Registro de usuario"}),(0,n.jsx)("div",{className:"user-fields",children:(0,n.jsx)("input",{type:"text",placeholder:"Nombre de Usuario",value:t,onChange:e=>r(e.target.value)})}),(0,n.jsxs)("div",{className:"name-fields",children:[(0,n.jsx)("input",{type:"text",placeholder:"Nombre",value:h,onChange:e=>g(e.target.value)}),(0,n.jsx)("input",{type:"text",placeholder:"Apellido",value:x,onChange:e=>m(e.target.value)})]}),(0,n.jsxs)("div",{className:"contact-fields",children:[(0,n.jsx)("input",{type:"text",placeholder:"Email",value:j,onChange:e=>y(e.target.value)}),(0,n.jsx)("input",{type:"text",placeholder:"Telefono",value:f,onChange:e=>v(e.target.value)})]}),(0,n.jsxs)("div",{className:"password-fields",children:[(0,n.jsx)("input",{type:"password",placeholder:"Contrase\xf1a",value:i,onChange:e=>u(e.target.value)}),(0,n.jsx)("input",{type:"password",placeholder:"Repetir Contrase\xf1a",value:d,onChange:e=>p(e.target.value)})]}),(0,n.jsx)("div",{className:"user-fields",style:{width:"100%"},children:(0,n.jsx)("input",{type:"text",placeholder:"URL Imagen",value:b,onChange:e=>C(e.target.value)})}),(0,n.jsx)("button",{onClick:E,children:"Registrar"}),N&&(0,n.jsx)("div",{className:"error-message",children:N})]}),(0,n.jsx)(s.Z,{})]})]})}},9008:function(e,t,r){e.exports=r(7828)},1163:function(e,t,r){e.exports=r(9090)},1955:function(e,t,r){"use strict";/*! js-cookie v3.0.5 | MIT */function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{Z:function(){return a}});var a=function e(t,r){function a(e,a,o){if("undefined"!=typeof document){"number"==typeof(o=n({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var i in o)o[i]&&(s+="; "+i,!0!==o[i]&&(s+="="+o[i].split(";")[0]));return document.cookie=e+"="+t.write(a,e)+s}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},a=0;a<r.length;a++){var o=r[a].split("="),s=o.slice(1).join("=");try{var i=decodeURIComponent(o[0]);if(n[i]=t.read(s,i),e===i)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){a(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[888,774,179],function(){return e(e.s=6148)}),_N_E=e.O()}]);